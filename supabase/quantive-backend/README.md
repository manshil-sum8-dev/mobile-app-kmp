# Quantive Supabase Backend (Isolated Dev Instance)

This directory contains a self-contained Supabase project for Quantive that runs on isolated ports so it won't interfere with your existing local Supabase (e.g., running on 54321).

## Ports (isolated)
- API: 54322
- DB: 54329
- Studio: 54328

Configured via `config.toml`.

## Prerequisites
- Docker + Docker Compose
- Supabase CLI: https://supabase.com/docs/guides/cli

## Quick start
```bash
cd supabase/quantive-backend
# Copy env example and fill in values (anon key generated by Supabase on start)
cp .env.quantive.example .env.quantive

# Start the isolated instance
supabase start -c config.toml --env-file .env.quantive

# Apply migrations (if not applied automatically)
supabase db push

# Reset (dangerous):
# supabase db reset

# Stop
supabase stop
```

## Structure
- `config.toml` – custom ports for this instance
- `migrations/` – SQL schema and functions
- `seed.sql` – optional seed data
- `functions/` – Edge Functions (optional)
- `.env.quantive` – environment variables for local dev (not committed)

## Notes
- Row-Level Security (RLS) is enabled for all app tables; access requires Auth with `owner_id = auth.uid()`.
- Never put service role keys in the mobile app. Use the anon key only.
- For mobile to access the local instance, ensure your device/simulator can reach the host (use the host machine IP, not localhost).
